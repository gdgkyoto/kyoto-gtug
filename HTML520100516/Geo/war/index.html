<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8" >
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<script src="position.js"></script>
	<script src="distance.js"></script>
	<script src="message.js"></script>
	<!-- <script src="http://maps.google.com/maps/api/js?sensor=false" ></script> -->
<script type="text/javascript">
var previousPosition = null;
var currentPosition = null;
var totalDistance = 0;
var timer;
function initialize() {
	timer = setInterval('getPosition3(updatePosition)', 2000);
}

function updatePosition(position){
	previousPosition = currentPosition;
	currentPosition = position;
	document.getElementById('location').innerHTML = "【緯度】" + currentPosition.latitude + '【経度】' + currentPosition.longitude;
	if(previousPosition != null){
		var distance = getDistance(previousPosition.longitude, previousPosition.latitude, currentPosition.longitude, currentPosition.latitude);
		totalDistance += distance;
		document.getElementById('distance').innerHTML = totalDistance + "メートル";
		var message = getMessage(totalDistance);
		document.getElementById('message').innerHTML = message;
	}
}
</script>
</head>
<body onload="initialize()">
	現在地
	<div id="location"></div>
	<br/>
	現在の歩行距離は<br/>
	<div id="distance"></div>
	です。
	<br/>
	現在のメッセージは<br />
	<div id="message"></div>
</body>
</html>