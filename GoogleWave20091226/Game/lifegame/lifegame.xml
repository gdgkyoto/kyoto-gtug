<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="Hello World!" width="500" height="500">
<Require feature="wave" />
</ModulePrefs>

<Content type="html">
<![CDATA[
<head>
<script>
var width = 50;
var height = 50;
function   idx(x, y)
{
	if (x < 0) x = width - (-x);
	if (x >= width) { x %= width; }
	if (y < 0) y = width - (-y);
	if (y >= width) { y %= width; }
	return x + y * width;
}

function  parse()
{
	var ret;
	var elmts = document.getElementsByTagName('td');
	for (var i = 0; i< elmts.length; i++) {
		ret += "0";
	}
	_gel('state') = ret;
}
function init()
{

	var tt = _gel("main");
	var d= document;
	var table = d.createElement('table');
	for (var i = 0; i< height; i++) {
		var ht = d.createElement('tr');
		for (var j = 0; j< width; j++) {
			var td = d.createElement("td");
			td.style.backgroundColor = "white";
			ht.appendChild(td);
			td.addEventListener("click", function(e) {e.target.style.backgroundColor="green"; }, false );
		}
		table.appendChild(ht);
	}
	tt.appendChild(table);
	var list= document.getElementsByTagName('td');

	list[0].style.backgroundColor="red";
	list[6].style.backgroundColor="red";
}
gadgets.util.registerOnLoadHandler(init);
</script>
<style>
table { border: 1px black solid;     border-collapse:collapse;}

td { border: 1px blue solid; width:4px; height:8px }
</style>
</head>

<body>
<h1>LifeGame!</h1>
<table id="main"></table> <button onclick="parse()">PARSE</button>
<span id="state"></span>
</body>
]]>
</Content>
</Module>
