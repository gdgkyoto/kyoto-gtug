<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>TweetSky</title>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/JavaScript" />
<link type="text/css" href="css/common.css" rel="stylesheet" />
<link type="text/css" href="css/jquery-ui-1.8.10.custom.css"
	rel="stylesheet" />
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.js"></script>
<script
	src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script>
<script>
window.onload = function() {
	
	$.getJSON("hotWords",
			function(json) {
				var tweets = $("#content");
				for(var i=0; i < json.length; i++) {
					//console.log(json[i]);
					tweets.append("<div class='tweet' id='tw" + i + "'>" + json[i].word + "</div>");
				}
				updateTweets(json);
			}
		);

	function updateTweets(words) {
		for(var i=0; i < words.length; i++) {
	 	$.getJSON("hotTweets?hot=" + words[i].word + "&count=1&hot_index=" + i,
			function(json) {
				//for(var j=0; j < json.length; j++) {
					var j=0;
					console.log(json.hot_index);
					var tweet = json.tweets[0];
					console.log(tweet);
					$("#tw" + json.hot_index).append(
				    '<div class="profileImageUrl"><a href="http://twitter.com/#!/' + tweet.fromUser + '"><img src="' + tweet.profileImageUrl + '" alt="" /></a></div>'
				    + '<div class="text">' + tweet.text + '</div>'
				    + '<div class="tweet-footer">'
				    + '  <span class="fromUser">@' + tweet.fromUser + '</span>'
				    + '  <span class="createdAt"><a href="http://twitter.com/#!/' + tweet.fromUser + '/statuses/' + tweet.id + '">about 4 hours ago</a></span>'
				    + '</div>');
				//}
			}
		);
	}}
 };     
</script>
</head>

	<div id="container">
	  <div id="header">
		  <h1><img src="images/logo.png" alt="TweetSky" /></h1>
	  </div>
	  <div id="content">
	  </div>
	  
	  <div id="footer">
	  </div>
	</div>
</body>
</html>
